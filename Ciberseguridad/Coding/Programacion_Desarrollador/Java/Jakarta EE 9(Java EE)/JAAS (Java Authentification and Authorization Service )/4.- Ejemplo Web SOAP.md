A la hora de copiar los dos proyectos jaxws, en el proyecto del cliente no borrar el target ya que est√°n importadas las clases del servidor que necesita para funcionar

![[Pasted image 20240127181906.png]]

*----------*
*WEBAPP*
*----------*
*CursoServicioWslImpl*
```java
package org.aartaraz.webapp.jaxws.services;  
  
import jakarta.annotation.security.DeclareRoles;  
import jakarta.annotation.security.RolesAllowed;  
import jakarta.ejb.Stateless;  
import jakarta.inject.Inject;  
import jakarta.jws.WebMethod;  
import jakarta.jws.WebService;  
import org.aartaraz.webapp.jaxws.models.Curso;  
import org.aartaraz.webapp.jaxws.repositories.CursoRepository;  
  
import java.util.List;  
  
@DeclareRoles({"USER", "ADMIN"})  
@Stateless  
@WebService(endpointInterface = "org.aartaraz.webapp.jaxws.services.CursoServicioWs")  
public class CursoServicioWsImpl implements CursoServicioWs {  
  
    @Inject  
    private CursoRepository repository;  
  
    @RolesAllowed({"ADMIN", "USER"})  
    @Override  
    @WebMethod    public List<Curso> listar() {  
        return repository.listar();  
    }  
  
    @RolesAllowed({"ADMIN"})  
    @Override  
    @WebMethod    public Curso guardar(Curso curso) {  
        return repository.guardar(curso);  
    }  
}
```

*Curso*
```java
...
@Transient //Para omitir el campo instructor de la tabla que no existe  
private String instructor;
...
```

*----------*
*CLIENTE*
*----------*
*CursoServicioWsImplService*
```java
  
package org.aartaraz.webapp.jaxws.services;  
  
import java.net.MalformedURLException;  
import java.net.URL;  
import javax.xml.namespace.QName;  
import jakarta.xml.ws.Service;  
import jakarta.xml.ws.WebEndpoint;  
import jakarta.xml.ws.WebServiceClient;  
import jakarta.xml.ws.WebServiceException;  
import jakarta.xml.ws.WebServiceFeature;  
  
  
/**  
 * This class was generated by the XML-WS Tools. * XML-WS Tools 4.0.1 * Generated source version: 3.0 * */  
@WebServiceClient(name = "CursoServicioWsImplService", targetNamespace = "http://services.jaxws.webapp.aartaraz.org/", wsdlLocation = "http://localhost:8080/webapp-jaxws-jpa-jaas/CursoServicioWsImpl?wsdl")  
public class CursoServicioWsImplService  
    extends Service  
{  
  
    private static final URL CURSOSERVICIOWSIMPLSERVICE_WSDL_LOCATION;  
    private static final WebServiceException CURSOSERVICIOWSIMPLSERVICE_EXCEPTION;  
    private static final QName CURSOSERVICIOWSIMPLSERVICE_QNAME = new QName("http://services.jaxws.webapp.aartaraz.org/", "CursoServicioWsImplService");  
  
    static {  
        URL url = null;  
        WebServiceException e = null;  
        try {  
            url = new URL("http://localhost:8080/webapp-jaxws-jpa-jaas/CursoServicioWsImpl?wsdl");  
        } catch (MalformedURLException ex) {  
            e = new WebServiceException(ex);  
        }  
        CURSOSERVICIOWSIMPLSERVICE_WSDL_LOCATION = url;  
        CURSOSERVICIOWSIMPLSERVICE_EXCEPTION = e;  
    }  
  
    public CursoServicioWsImplService() {  
        super(__getWsdlLocation(), CURSOSERVICIOWSIMPLSERVICE_QNAME);  
    }  
  
    public CursoServicioWsImplService(WebServiceFeature... features) {  
        super(__getWsdlLocation(), CURSOSERVICIOWSIMPLSERVICE_QNAME, features);  
    }  
  
    public CursoServicioWsImplService(URL wsdlLocation) {  
        super(wsdlLocation, CURSOSERVICIOWSIMPLSERVICE_QNAME);  
    }  
  
    public CursoServicioWsImplService(URL wsdlLocation, WebServiceFeature... features) {  
        super(wsdlLocation, CURSOSERVICIOWSIMPLSERVICE_QNAME, features);  
    }  
  
    public CursoServicioWsImplService(URL wsdlLocation, QName serviceName) {  
        super(wsdlLocation, serviceName);  
    }  
  
    public CursoServicioWsImplService(URL wsdlLocation, QName serviceName, WebServiceFeature... features) {  
        super(wsdlLocation, serviceName, features);  
    }  
  
    /**  
     ** @return  
     *     returns CursoServicioWs  
     */    
    @WebEndpoint(name = "CursoServicioWsImplPort")  
    public CursoServicioWs getCursoServicioWsImplPort() {  
        return super.getPort(new QName("http://services.jaxws.webapp.aartaraz.org/", "CursoServicioWsImplPort"), CursoServicioWs.class);  
    }  
  
    /**  
     ** @param features  
     *     A list of {@link jakarta.xml.ws.WebServiceFeature} to configure on the proxy.  Supported features not in the <code>features</code> parameter will have their default values.  
     * @return  
     *     returns CursoServicioWs  
     */    
    @WebEndpoint(name = "CursoServicioWsImplPort")  
    public CursoServicioWs getCursoServicioWsImplPort(WebServiceFeature... features) {  
        return super.getPort(new QName("http://services.jaxws.webapp.aartaraz.org/", "CursoServicioWsImplPort"), CursoServicioWs.class, features);  
    }  
  
    private static URL __getWsdlLocation() {  
        if (CURSOSERVICIOWSIMPLSERVICE_EXCEPTION!= null) {  
            throw CURSOSERVICIOWSIMPLSERVICE_EXCEPTION;  
        }  
        return CURSOSERVICIOWSIMPLSERVICE_WSDL_LOCATION;  
    }  
  
}
```


*pom*
```xml
<?xml version="1.0" encoding="UTF-8"?>  
<project xmlns="http://maven.apache.org/POM/4.0.0"  
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">  
    <modelVersion>4.0.0</modelVersion>  
  
    <groupId>org.aartaraz.cliente.ws.jpa.jaas</groupId>  
    <artifactId>cliente-ws-jpa-jaas</artifactId>  
    <version>1.0-SNAPSHOT</version>  
  
    <properties>  
        <maven.compiler.source>17</maven.compiler.source>  
        <maven.compiler.target>17</maven.compiler.target>  
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>  
    </properties>  
  
    <dependencies>  
        <dependency>  
            <groupId>com.sun.xml.ws</groupId>  
            <artifactId>jaxws-rt</artifactId>  
            <version>4.0.1</version>  
        </dependency>  
    </dependencies>  
  
    <build>  
        <plugins>  
            <plugin>  
                <groupId>com.sun.xml.ws</groupId>  
                <artifactId>jaxws-maven-plugin</artifactId>  
                <version>4.0.1</version>  
                <executions>  
                    <execution>  
                        <goals>  
                            <goal>wsimport</goal>  
                        </goals>  
                        <configuration>  
                            <wsdlUrls>  
                                <wsdlUrl>http://localhost:8080/webapp-jaxws-jpa-jaas/CursoServicioWsImpl?wsdl</wsdlUrl>  
                            </wsdlUrls>  
                        </configuration>  
                    </execution>  
                </executions>  
            </plugin>  
        </plugins>  
    </build>  
  
</project>
```


*Main*
```java
package org.aartaraz.clientews;  
  
import jakarta.xml.ws.BindingProvider;  
import org.aartaraz.webapp.jaxws.services.*;  
  
public class Main {  
    public static void main(String[] args) {  
        CursoServicioWs service = new CursoServicioWsImplService().getCursoServicioWsImplPort();  
  
        ((BindingProvider)service).getRequestContext().put(BindingProvider.USERNAME_PROPERTY, "admin");  
        ((BindingProvider)service).getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, "12345");  
        Curso curso = new Curso();  
        curso.setNombre("react");  
        curso.setDescripcion("react js");  
        curso.setDuracion(50D);  
        curso.setInstructor("Arkaitz Artaraz");  
        Curso respuesta= service.guardar(curso);  
        System.out.println("nuevo curso: " + curso.getId() + ", " + curso.getNombre());  
  
        service.listar().forEach(c -> System.out.println(c.getNombre()));  
    }  
}
```


